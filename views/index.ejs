<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link href="/css/output.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="/css/mai34n9.css">
</head>
<body>
    <!-- Background Container -->
    <div class="background-container">
        <% if (background.type === 'image') { %>
            <img src="<%= background.url %>" alt="Background" id="bgElement">
        <% } else if (background.type === 'video') { %>
            <video autoplay loop muted playsinline id="bgElement">
                <source src="<%= background.url %>" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        <% } %>
    </div>

    <!-- Content -->
    <div class="flex flex-row min-h-screen justify-center items-center">
        <% if (title) { %>
            <h1 class="text-4xl text-white"><%= title %></h1>
        <% } %>
    </div>

    <!-- Music Player -->
    <% if (music.showPlayer) { %>
        <div class="player-container">
            <div class="player">
                <div class="album-cover">
                    <div class="image"></div>
                </div>
                <div class="panel">
                    <div class="info">
                        <div class="title">Loading...</div>
                        <div class="artist">Loading...</div>
                    </div>
                    <div class="controls">
                        <div class="playback">
                            <div class="backward">
                                <i class="fas fa-backward"></i>
                            </div>
                            <div class="play">
                                <i class="fas fa-play"></i>
                            </div>
                            <div class="forward">
                                <i class="fas fa-forward"></i>
                            </div>
                        </div>
                        <div class="repeat">
                            <i class="fas fa-redo-alt"></i>
                        </div>
                        <div class="playlist">
                            <i class="fas fa-list-ul"></i>
                        </div>
                        <div class="heart">
                            <i class="fas fa-heart"></i>
                        </div>
                    </div>
                    <div id="expand-button">
                        <i class="fas fa-chevron-down fa-2x"></i>
                    </div>
                    <div class="timeline">
                        <div class="current-time">0:00</div>
                        <div class="line">
                            <div class="current"></div>
                        </div>
                        <div class="total-time">0:00</div>
                    </div>
                </div>
            </div>
            <audio id="audio-element" src="<%= music.selected.url %>"></audio>
        </div>
    <% } %>

    <!-- Full-screen overlay -->
    <div id="overlay">
        click to enter...
    </div>

    <!-- Script -->
    <script>
    window.musicData = {};
    window.musicData.autoplay = "<%= music.autoplay ? 'true' : 'false' %>";
    window.musicData.blur = "<%= background.blur %>";
    window.musicData.files = <%- JSON.stringify(music.files) %>;
    window.musicData.selectedUrl = "<%= music.selected.url %>";
    </script>
    <script src="/scripts/mai46n9.js"></script>
</body>
</html>